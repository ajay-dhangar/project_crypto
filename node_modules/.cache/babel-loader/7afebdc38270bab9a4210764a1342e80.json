{"ast":null,"code":"import _defineProperty from \"F:\\\\GitHub\\\\project_crypto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"F:\\\\GitHub\\\\project_crypto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport classNames from 'classnames';\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from 'react';\nimport { ConfigContext } from '../config-provider';\nimport DefaultRenderEmpty from '../config-provider/defaultRenderEmpty';\nimport { FormItemInputContext } from '../form/context';\nimport LocaleReceiver from '../locale/LocaleReceiver';\nimport defaultLocale from '../locale/en_US';\nimport { getMergedStatus, getStatusClassNames } from '../_util/statusUtils';\nimport { groupKeysMap, groupDisabledKeysMap } from '../_util/transKeys';\nimport warning from '../_util/warning';\nimport List from './list';\nimport Operation from './operation';\nimport Search from './search';\nimport useStyle from './style';\nvar TransferFC = function TransferFC(props) {\n  var prefixCls = props.prefixCls,\n    className = props.className,\n    style = props.style,\n    children = props.children;\n  var _useStyle = useStyle(prefixCls),\n    _useStyle2 = _slicedToArray(_useStyle, 2),\n    wrapSSR = _useStyle2[0],\n    hashId = _useStyle2[1];\n  return wrapSSR( /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(className, hashId),\n    style: style\n  }, children));\n};\nvar Transfer = function Transfer(props) {\n  var _classNames;\n  var _props$dataSource = props.dataSource,\n    dataSource = _props$dataSource === void 0 ? [] : _props$dataSource,\n    _props$targetKeys = props.targetKeys,\n    targetKeys = _props$targetKeys === void 0 ? [] : _props$targetKeys,\n    _props$selectedKeys = props.selectedKeys,\n    selectedKeys = _props$selectedKeys === void 0 ? [] : _props$selectedKeys,\n    _props$selectAllLabel = props.selectAllLabels,\n    selectAllLabels = _props$selectAllLabel === void 0 ? [] : _props$selectAllLabel,\n    _props$operations = props.operations,\n    operations = _props$operations === void 0 ? [] : _props$operations,\n    _props$style = props.style,\n    style = _props$style === void 0 ? {} : _props$style,\n    _props$listStyle = props.listStyle,\n    listStyle = _props$listStyle === void 0 ? {} : _props$listStyle,\n    _props$locale = props.locale,\n    locale = _props$locale === void 0 ? {} : _props$locale,\n    titles = props.titles,\n    className = props.className,\n    disabled = props.disabled,\n    _props$showSearch = props.showSearch,\n    showSearch = _props$showSearch === void 0 ? false : _props$showSearch,\n    operationStyle = props.operationStyle,\n    showSelectAll = props.showSelectAll,\n    oneWay = props.oneWay,\n    pagination = props.pagination,\n    customStatus = props.status,\n    customizePrefixCls = props.prefixCls,\n    filterOption = props.filterOption,\n    render = props.render,\n    footer = props.footer,\n    children = props.children,\n    rowKey = props.rowKey,\n    onScroll = props.onScroll,\n    onChange = props.onChange,\n    onSearch = props.onSearch,\n    onSelectChange = props.onSelectChange;\n  var _useState = useState(function () {\n      return selectedKeys.filter(function (key) {\n        return !targetKeys.includes(key);\n      });\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    sourceSelectedKeys = _useState2[0],\n    setSourceSelectedKeys = _useState2[1];\n  var _useState3 = useState(function () {\n      return selectedKeys.filter(function (key) {\n        return targetKeys.includes(key);\n      });\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    targetSelectedKeys = _useState4[0],\n    setTargetSelectedKeys = _useState4[1];\n  useEffect(function () {\n    if (props.selectedKeys) {\n      setSourceSelectedKeys(function () {\n        return selectedKeys.filter(function (key) {\n          return !targetKeys.includes(key);\n        });\n      });\n      setTargetSelectedKeys(function () {\n        return selectedKeys.filter(function (key) {\n          return targetKeys.includes(key);\n        });\n      });\n    }\n  }, [props.selectedKeys, props.targetKeys]);\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== \"production\" ? warning(!pagination || !children, 'Transfer', '`pagination` not support customize render list.') : void 0;\n  }\n  var setStateKeys = useCallback(function (direction, keys) {\n    if (direction === 'left') {\n      setSourceSelectedKeys(function (prev) {\n        return typeof keys === 'function' ? keys(prev || []) : keys;\n      });\n    } else {\n      setTargetSelectedKeys(function (prev) {\n        return typeof keys === 'function' ? keys(prev || []) : keys;\n      });\n    }\n  }, [sourceSelectedKeys, targetSelectedKeys]);\n  var handleSelectChange = useCallback(function (direction, holder) {\n    if (direction === 'left') {\n      onSelectChange === null || onSelectChange === void 0 ? void 0 : onSelectChange(holder, targetSelectedKeys);\n    } else {\n      onSelectChange === null || onSelectChange === void 0 ? void 0 : onSelectChange(sourceSelectedKeys, holder);\n    }\n  }, [sourceSelectedKeys, targetSelectedKeys]);\n  var getTitles = function getTitles(transferLocale) {\n    var _a;\n    return (_a = titles !== null && titles !== void 0 ? titles : transferLocale.titles) !== null && _a !== void 0 ? _a : [];\n  };\n  var handleLeftScroll = function handleLeftScroll(e) {\n    onScroll === null || onScroll === void 0 ? void 0 : onScroll('left', e);\n  };\n  var handleRightScroll = function handleRightScroll(e) {\n    onScroll === null || onScroll === void 0 ? void 0 : onScroll('right', e);\n  };\n  var moveTo = function moveTo(direction) {\n    var moveKeys = direction === 'right' ? sourceSelectedKeys : targetSelectedKeys;\n    var dataSourceDisabledKeysMap = groupDisabledKeysMap(dataSource);\n    // filter the disabled options\n    var newMoveKeys = moveKeys.filter(function (key) {\n      return !dataSourceDisabledKeysMap.has(key);\n    });\n    var newMoveKeysMap = groupKeysMap(newMoveKeys);\n    // move items to target box\n    var newTargetKeys = direction === 'right' ? newMoveKeys.concat(targetKeys) : targetKeys.filter(function (targetKey) {\n      return !newMoveKeysMap.has(targetKey);\n    });\n    // empty checked keys\n    var oppositeDirection = direction === 'right' ? 'left' : 'right';\n    setStateKeys(oppositeDirection, []);\n    handleSelectChange(oppositeDirection, []);\n    onChange === null || onChange === void 0 ? void 0 : onChange(newTargetKeys, direction, newMoveKeys);\n  };\n  var moveToLeft = function moveToLeft() {\n    moveTo('left');\n  };\n  var moveToRight = function moveToRight() {\n    moveTo('right');\n  };\n  var onItemSelectAll = function onItemSelectAll(direction, keys, checkAll) {\n    setStateKeys(direction, function (prevKeys) {\n      var mergedCheckedKeys = [];\n      if (checkAll) {\n        // Merge current keys with origin key\n        mergedCheckedKeys = Array.from(new Set([].concat(_toConsumableArray(prevKeys), _toConsumableArray(keys))));\n      } else {\n        var selectedKeysMap = groupKeysMap(keys);\n        // Remove current keys from origin keys\n        mergedCheckedKeys = prevKeys.filter(function (key) {\n          return !selectedKeysMap.has(key);\n        });\n      }\n      handleSelectChange(direction, mergedCheckedKeys);\n      return mergedCheckedKeys;\n    });\n  };\n  var onLeftItemSelectAll = function onLeftItemSelectAll(keys, checkAll) {\n    onItemSelectAll('left', keys, checkAll);\n  };\n  var onRightItemSelectAll = function onRightItemSelectAll(keys, checkAll) {\n    onItemSelectAll('right', keys, checkAll);\n  };\n  var leftFilter = function leftFilter(e) {\n    return onSearch === null || onSearch === void 0 ? void 0 : onSearch('left', e.target.value);\n  };\n  var rightFilter = function rightFilter(e) {\n    return onSearch === null || onSearch === void 0 ? void 0 : onSearch('right', e.target.value);\n  };\n  var handleLeftClear = function handleLeftClear() {\n    return onSearch === null || onSearch === void 0 ? void 0 : onSearch('left', '');\n  };\n  var handleRightClear = function handleRightClear() {\n    return onSearch === null || onSearch === void 0 ? void 0 : onSearch('right', '');\n  };\n  var onItemSelect = function onItemSelect(direction, selectedKey, checked) {\n    var holder = _toConsumableArray(direction === 'left' ? sourceSelectedKeys : targetSelectedKeys);\n    var index = holder.indexOf(selectedKey);\n    if (index > -1) {\n      holder.splice(index, 1);\n    }\n    if (checked) {\n      holder.push(selectedKey);\n    }\n    handleSelectChange(direction, holder);\n    if (!props.selectedKeys) {\n      setStateKeys(direction, holder);\n    }\n  };\n  var onLeftItemSelect = function onLeftItemSelect(selectedKey, checked) {\n    onItemSelect('left', selectedKey, checked);\n  };\n  var onRightItemSelect = function onRightItemSelect(selectedKey, checked) {\n    onItemSelect('right', selectedKey, checked);\n  };\n  var onRightItemRemove = function onRightItemRemove(keys) {\n    setStateKeys('right', []);\n    onChange === null || onChange === void 0 ? void 0 : onChange(targetKeys.filter(function (key) {\n      return !keys.includes(key);\n    }), 'left', _toConsumableArray(keys));\n  };\n  var handleListStyle = function handleListStyle(direction) {\n    if (typeof listStyle === 'function') {\n      return listStyle({\n        direction: direction\n      });\n    }\n    return listStyle || {};\n  };\n  var _useMemo = useMemo(function () {\n      var leftData = [];\n      var rightData = new Array(targetKeys.length);\n      var targetKeysMap = groupKeysMap(targetKeys);\n      dataSource.forEach(function (record) {\n        if (rowKey) {\n          record = Object.assign(Object.assign({}, record), {\n            key: rowKey(record)\n          });\n        }\n        // rightData should be ordered by targetKeys\n        // leftData should be ordered by dataSource\n        if (targetKeysMap.has(record.key)) {\n          rightData[targetKeysMap.get(record.key)] = record;\n        } else {\n          leftData.push(record);\n        }\n      });\n      return [leftData, rightData];\n    }, [dataSource, targetKeys, rowKey]),\n    _useMemo2 = _slicedToArray(_useMemo, 2),\n    leftDataSource = _useMemo2[0],\n    rightDataSource = _useMemo2[1];\n  var configContext = useContext(ConfigContext);\n  var formItemContext = useContext(FormItemInputContext);\n  var getPrefixCls = configContext.getPrefixCls,\n    renderEmpty = configContext.renderEmpty,\n    direction = configContext.direction;\n  var hasFeedback = formItemContext.hasFeedback,\n    status = formItemContext.status;\n  var getLocale = function getLocale(transferLocale) {\n    return Object.assign(Object.assign(Object.assign({}, transferLocale), {\n      notFoundContent: (renderEmpty === null || renderEmpty === void 0 ? void 0 : renderEmpty('Transfer')) || /*#__PURE__*/React.createElement(DefaultRenderEmpty, {\n        componentName: \"Transfer\"\n      })\n    }), locale);\n  };\n  var prefixCls = getPrefixCls('transfer', customizePrefixCls);\n  var mergedStatus = getMergedStatus(status, customStatus);\n  var mergedPagination = !children && pagination;\n  var leftActive = targetSelectedKeys.length > 0;\n  var rightActive = sourceSelectedKeys.length > 0;\n  var cls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_classNames, \"\".concat(prefixCls, \"-customize-list\"), !!children), _defineProperty(_classNames, \"\".concat(prefixCls, \"-rtl\"), direction === 'rtl'), _classNames), getStatusClassNames(prefixCls, mergedStatus, hasFeedback), className);\n  return /*#__PURE__*/React.createElement(LocaleReceiver, {\n    componentName: \"Transfer\",\n    defaultLocale: defaultLocale.Transfer\n  }, function (contextLocale) {\n    var listLocale = getLocale(contextLocale);\n    var _getTitles = getTitles(listLocale),\n      _getTitles2 = _slicedToArray(_getTitles, 2),\n      leftTitle = _getTitles2[0],\n      rightTitle = _getTitles2[1];\n    return /*#__PURE__*/React.createElement(TransferFC, {\n      prefixCls: prefixCls,\n      className: cls,\n      style: style\n    }, /*#__PURE__*/React.createElement(List, Object.assign({\n      prefixCls: \"\".concat(prefixCls, \"-list\"),\n      titleText: leftTitle,\n      dataSource: leftDataSource,\n      filterOption: filterOption,\n      style: handleListStyle('left'),\n      checkedKeys: sourceSelectedKeys,\n      handleFilter: leftFilter,\n      handleClear: handleLeftClear,\n      onItemSelect: onLeftItemSelect,\n      onItemSelectAll: onLeftItemSelectAll,\n      render: render,\n      showSearch: showSearch,\n      renderList: children,\n      footer: footer,\n      onScroll: handleLeftScroll,\n      disabled: disabled,\n      direction: direction === 'rtl' ? 'right' : 'left',\n      showSelectAll: showSelectAll,\n      selectAllLabel: selectAllLabels[0],\n      pagination: mergedPagination\n    }, listLocale)), /*#__PURE__*/React.createElement(Operation, {\n      className: \"\".concat(prefixCls, \"-operation\"),\n      rightActive: rightActive,\n      rightArrowText: operations[0],\n      moveToRight: moveToRight,\n      leftActive: leftActive,\n      leftArrowText: operations[1],\n      moveToLeft: moveToLeft,\n      style: operationStyle,\n      disabled: disabled,\n      direction: direction,\n      oneWay: oneWay\n    }), /*#__PURE__*/React.createElement(List, Object.assign({\n      prefixCls: \"\".concat(prefixCls, \"-list\"),\n      titleText: rightTitle,\n      dataSource: rightDataSource,\n      filterOption: filterOption,\n      style: handleListStyle('right'),\n      checkedKeys: targetSelectedKeys,\n      handleFilter: rightFilter,\n      handleClear: handleRightClear,\n      onItemSelect: onRightItemSelect,\n      onItemSelectAll: onRightItemSelectAll,\n      onItemRemove: onRightItemRemove,\n      render: render,\n      showSearch: showSearch,\n      renderList: children,\n      footer: footer,\n      onScroll: handleRightScroll,\n      disabled: disabled,\n      direction: direction === 'rtl' ? 'left' : 'right',\n      showSelectAll: showSelectAll,\n      selectAllLabel: selectAllLabels[1],\n      showRemove: oneWay,\n      pagination: mergedPagination\n    }, listLocale)));\n  });\n};\nif (process.env.NODE_ENV !== 'production') {\n  Transfer.displayName = 'Transfer';\n}\nTransfer.List = List;\nTransfer.Search = Search;\nTransfer.Operation = Operation;\nexport default Transfer;","map":null,"metadata":{},"sourceType":"module"}